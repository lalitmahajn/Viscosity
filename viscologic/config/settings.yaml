app:
  name: ViscoLogic
  version: 1.0.0
  ui_enabled: true
  tick_ms: 100
  mode: inline
  control_source: local
  inline_auto_resume: true
  ui_refresh_ms: 250
  sample_rate_hz: 200
mode:
  default_mode: tabletop
  default_control_source: local
  remote_enable: false
  auto_resume_inline: true
  comm_loss_action: pause
safety:
  max_current_ma: 150.0
  air_cal_current_ma: 50
  air_cal_max_sec: 15
  soft_start_ramp_ms: 800
  max_temp_c: 80.0
  max_drive_duty: 0.85
  soft_start_s: 2.0
  fault_latch: true
  fault_reset_requires_ack: true
sweep:
  f_min: 150.0
  f_max: 200.0
  coarse_step: 1.0
  fine_step: 0.1
logging:
  csv_enabled: true
  csv_dir: logs/csv
  retention_days: 30
modbus:
  enabled: true
  host: 0.0.0.0
  port: 5020
  unit_id: 1
  mapping_version: 1
storage:
  sqlite_path: data/viscologic.db
  sqlite:
    enabled: true
    path: data/viscologic.db
  csv_logger:
    enabled: true
    auto_start: false
    folder: logs
    rotate_daily: true
    retention_days: 30
  retention:
    db_days: 90
    csv_days: 30
security:
  commissioning_required_on_first_run: true
  engineer_password: '1234'
  session_timeout_s: 1800
  commissioning:
    require_first_time_lock: true
    allow_reset_by_engineer: true
hardware:
  i2c_bus: 1
  spi_bus: 0
  gpio:
    pwm_pin: 18
    enable_pin: 23
    fault_pin: 24
drivers:
  adc_type: ads1115
  drive_type: pwm
  audio:
    rate: 44100
    chunk: 1024
    input_device_index: null
    gain: 5.0
    output_device_index: null
    output_gain: 0.5
  adc_ads1115:
    enabled: true
    i2c_addr: 72
    gain: 1
    sample_rate_sps: 860
    channel_diff:
    - 0
    - 1
    vref: 3.3
    scale: 1.0
  temp_max31865:
    enabled: true
    spi_cs: CE0
    rtd_nominal: 100.0
    ref_resistor: 430.0
    wires: 3
    filter_hz: 50
    fault_check_interval_s: 2.0
  drive_pwm:
    enabled: true
    backend: lgpio
    pwm_freq_hz: 1000
    duty_min: 0.02
    duty_max: 0.85
    start_duty: 0.15
    ramp_step: 0.01
    ramp_interval_ms: 50
dsp:
  target_freq_hz: 180.0
  sweep_span_hz: 5.0
  sweep_step_hz: 0.1
  sweep_dwell_ms: 60
  lockin_tau_s: 0.2
  notch_hz: 50
  notch_q: 20
  bandpass:
    enabled: true
    low_hz: 150
    high_hz: 220
    order: 2
health:
  enable: true
  min_confidence_ok: 60.0
  min_confidence_good: 80.0
  max_freq_jump_hz: 1.0
  max_noise_ratio: 0.6
  max_dropouts_per_min: 10
model:
  feature_key: magnitude_clean
  viscosity_min_cp: 0.01
  viscosity_max_cp: 100000.0
  temp_compensation:
    enabled: true
    reference_temp_c: 25.0
    alpha_per_c: 0.02
calibration:
  active_profile: Default
  min_points_required: 3
  recommended_points:
  - name: Air
    cp: 0.0
  - name: Water
    cp: 1.0
  - name: Std Oil
    cp: 100.0
protocols:
  modbus_server:
    enabled: true
    host: 0.0.0.0
    port: 5020
    unit_id: 1
    update_period_ms: 200
  remote_enable: true
  comm_loss_timeout_ms: 2000
  comm_loss_action: safe_stop
plc:
  allow_remote_start: true
  allow_remote_stop: true
  remote_start_edge: true
  remote_stop_edge: true
  local_stop_always_allowed: true
